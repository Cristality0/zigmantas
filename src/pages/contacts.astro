---
import linkedInIcon from "../assets/icons/linkedin-icon.svg";
import Layout from "../layouts/layout.astro";

const description = "Get in touch with me!";
const email = "jovarasz@gmail.com";
---

<Layout title="Contacts" description={description}>
  <div class="container page-container">
    <main>
      <section class="contact-section">
        <h1>Contacts</h1>

        <p>
          Feel free to reach out for questions, collaborations, or just to say
          hello!
        </p>

        <div class="options">
          <button
            id="copy-email-btn"
            class="option copy-btn"
            data-email={email}
            aria-label="Copy email address"
          >
            <svg
              class="icon"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect width="20" height="16" x="2" y="4" rx="2" />
              <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" />
            </svg>
            <span id="copy-btn-text">Copy email</span>
          </button>

          <a
            href={"https://www.linkedin.com/in/jovaraszigmantas/"}
            class="option linkedin-link"
            aria-label="Contact me on LinkedIn"
          >
            <img class="icon" src={linkedInIcon.src} alt="LinkedIn icon">
            <span>Message</span>
          </a>
        </div>

        <a href="/" class="back-link">‚Üê Home</a>
      </section>
    </main>
  </div>
</Layout>

<script>
  const copyButton = document.getElementById("copy-email-btn");
  const copyBtnText = document.getElementById("copy-btn-text");

  if (copyButton && copyBtnText) {
    copyButton.addEventListener("click", async () => {
      const email = copyButton.getAttribute("data-email");

      if (email) {
        try {
          await navigator.clipboard.writeText(email);

          // Add copied class for green color
          copyButton.classList.add("copied");
          copyBtnText.textContent = "Email copied";

          setTimeout(() => {
            copyButton.classList.remove("copied");
            copyBtnText.textContent = "Copy email";
          }, 2000);
        } catch (err) {
          copyBtnText.textContent = "Failed to copy";
          setTimeout(() => {
            copyBtnText.textContent = "Copy email";
          }, 2000);
        }
      }
    });
  }
</script>

<style>
  .container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  main {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: var(--spacing-lg);
  }

  .contact-section {
    display: flex;
    align-items: center;
    flex-direction: column;
    justify-content: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
    text-align: center;
  }

  h1 {
    font-size: var(--font-size-heading);
    margin: 0 0 var(--spacing-md) 0;
    color: var(--color-text-primary);
    font-weight: 400;
  }

  .options {
    display: flex;
    gap: var(--spacing-lg);
    align-items: center;
    margin: 0;
  }

  .option {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-md) var(--spacing-lg);
    color: var(--color-text-secondary);
    text-decoration: none;
    transition: color var(--transition-fast);
    background: transparent;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-family: inherit;
    font-size: 16px;
    white-space: nowrap;
  }

  .option:hover {
    color: var(--color-accent);
  }

  .option:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  /* Copy button copied state */
  .copy-btn.copied {
    color: #10b981;
  }

  /* LinkedIn hover color */
  .linkedin-link:hover {
    color: var(--color-linkedin);
  }

  .icon {
    width: 1em;
    height: 1em;
    transition: transform var(--transition-fast);
  }

  .option:hover .icon {
    transform: translateY(-1px);
  }

  .back-link {
    color: var(--color-text-secondary);
    text-decoration: none;
    transition: color var(--transition-fast);
    font-size: 14px;
    margin: 0;
    display: inline-block;
  }

  .back-link:hover {
    color: var(--color-accent);
  }

  .back-link:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  p {
    color: var(--color-text-secondary);
    margin: 0;
  }

  @media screen and (max-width: 480px) {
    .options {
      flex-direction: column;
      gap: var(--spacing-md);
    }

    h1 {
      font-size: calc(var(--font-size-heading) + 2px);
    }
  }
</style>
